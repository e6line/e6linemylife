(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c1c0ba6"],{"04ca":function(t,e,a){"use strict";var i=a("ea94"),s=a.n(i);s.a},"2d8b":function(t,e,a){t.exports=a.p+"img/login_pic_logo.7d0cafb4.png"},da5e:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"layout"},[i("Layout",[i("Header",{staticStyle:{position:"fixed",width:"100%",background:"#fff",padding:"0 0","z-index":"1000",top:"0"}},[i("Menu",{style:{height:"65px",width:"100%"},attrs:{mode:"horizontal",theme:"light"},on:{"on-select":function(e){t.menuSelect(e)}}},[i("div",{staticStyle:{width:"95%",margin:"0 auto"}},[i("div",{staticClass:"layout-logo"},[i("a",{on:{click:function(e){t.backHome()}}},[i("img",{staticStyle:{height:"45px"},attrs:{src:a("2d8b"),align:"absmiddle"}})])]),i("div",{staticClass:"header-warp"},[i("div",{staticClass:"header-box"},[i("div",{staticClass:"layout-nav"},[i("MenuItem",{attrs:{name:"1"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t首页\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),i("MenuItem",{attrs:{name:"3"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tIEP分类\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])],1),i("div",{staticClass:"layout-btn"},[i("Button",{attrs:{type:"primary",icon:"md-create",to:"/createArticle"}},[t._v("写分享")])],1)]),i("div",{staticClass:"layout-search"},[i("Input",{staticStyle:{width:"300px"},attrs:{icon:"md-search",placeholder:"论ALSOLIFE的革命史"},on:{"on-enter":function(e){t.search()}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1)]),i("div",{staticClass:"header-user"},[t.loginFlag?i("div",{staticClass:"layout-nav"},[i("MenuItem",{attrs:{name:"6"}},[i("Icon",{attrs:{type:"md-notifications",size:"24"}})],1),i("MenuItem",{attrs:{name:"7"}},[i("Icon",{attrs:{type:"md-mail",size:"24"}})],1),i("MenuItem",{attrs:{name:"8"}},[i("Icon",{attrs:{type:"md-exit",size:"24"}})],1)],1):t._e(),t.loginFlag?t._e():i("div",{staticClass:"layout-nav"},[i("MenuItem",{attrs:{name:"5"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t登录\n\t\t\t\t\t\t\t\t\t\t\t\t\t")])],1)])])])],1),i("Content",{style:{margin:"65px 0 0 0"}},[i("router-view")],1),i("Footer",{staticClass:"layout-footer-center"},[i("p",[t._v("北京阿叟阿巴科技有限公司")]),i("p",[t._v("AlsoLife 2017 All Rights Reserved")])])],1),i("Modal",{attrs:{"mask-closable":!1,visible:t.emailModal,loading:t.loading,width:"600",title:"联系管理员"},on:{"update:visible":function(e){t.emailModal=e},"on-ok":function(e){t.emailOk("email")},"on-cancel":function(e){t.cancel()}},model:{value:t.emailModal,callback:function(e){t.emailModal=e},expression:"emailModal"}},[i("Form",{ref:"email",attrs:{rules:t.emailRule,model:t.email,"label-width":80}},[i("FormItem",{attrs:{label:"标题",prop:"title"}},[i("Input",{attrs:{placeholder:"请输入标题"},model:{value:t.email.title,callback:function(e){t.$set(t.email,"title",e)},expression:"email.title"}})],1),i("FormItem",{attrs:{label:"email",prop:"email"}},[i("Input",{attrs:{placeholder:"请输入email"},model:{value:t.email.email,callback:function(e){t.$set(t.email,"email",e)},expression:"email.email"}})],1),i("FormItem",{attrs:{label:"姓名",prop:"name"}},[i("Input",{attrs:{placeholder:"请输入姓名"},model:{value:t.email.name,callback:function(e){t.$set(t.email,"name",e)},expression:"email.name"}})],1),i("FormItem",{attrs:{label:"内容",prop:"content"}},[i("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"Enter something..."},model:{value:t.email.content,callback:function(e){t.$set(t.email,"content",e)},expression:"email.content"}})],1)],1)],1)],1)},s=[],n=(a("7f7f"),a("a481"),{data:function(){return{loginFlag:!1,loading:!0,searchValue:"",emailModal:!1,unreadMsgCount:0,email:{title:"",email:"",name:"",content:""},user:{loginName:"",email:"",headimg:"",name:""},emailRule:{title:[{type:"string",required:!0,message:"请输入密码",trigger:"blur"}],email:[{required:!0,message:"输入邮箱",trigger:"blur"},{type:"email",message:"输入正确的邮箱格式",trigger:"blur"}],passwordAgain:[{type:"string",required:!0,message:"请输入再次输入密码",trigger:"blur"}],name:[{type:"string",required:!0,message:"请输入姓名",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}]}}},mounted:function(){var t=this.$route.query.code,e=this.$route.query.state;if(this.$store.getters._isMobile)return null!=t&&""!=t&&null!=e&&""!=e?void this.$router.replace("/mobile?code="+t+"&state="+e):void this.$router.replace("/mobile");this.login(t,e)},methods:{userGet:function(){var t=this;this.axios({method:"get",url:"/public/getUserInfo"}).then(function(t){return"000000"==t.data.code?(this.loginFlag=!0,this.userSet(t.data.data),this.axios({method:"get",url:"/msgrecords/unreadnum"})):Promise.resolve(0)}.bind(this)).then(function(e){t.unreadMsgCount=0===e?e:e.data.data}).catch(function(t){this.$Message.error("无权限")}.bind(this))},userSet:function(t){this.user.loginName=t.loginName,this.user.email=t.email,this.user.headimg=t.headimg,this.user.name=t.name},search:function(){null!=this.searchValue&&""!=this.searchValue&&this.$router.push("/page/home/"+this.searchValue)},menuSelect:function(t){1==t?this.$router.push("/page/home"):2==t?this.emailModal=!0:3==t?this.$router.push("/page/iep"):8==t?this.$store.dispatch("users/loginOUt",{router:this.$router}):4==t?this.$router.push("/base"):5==t?this.$router.push("/login"):6==t&&this.$router.push("/page/notice")},backHome:function(){this.$router.push("/page/home")},cancel:function(){this.$Message.info("点击了取消")},emailOk:function(t){var e=this;this.$refs[t].validate(function(t){t?(e.axios({method:"post",url:"/email",data:e.email}).then(function(t){this.$Message.info("发送成功")}.bind(e)).catch(function(t){alert(t)}),e.emailModal=!1):(e.$Message.error("表单验证失败!"),setTimeout(function(){e.loading=!1,e.$nextTick(function(){e.loading=!0})},1e3))})},login:function(t,e){var a=this;null!=t&&""!=t&&null!=e&&""!=e?(this.$Spin.show({render:function(t){return t("div",[t("Icon",{style:{animation:"ani-demo-spin 1s linear infinite"},props:{type:"load-c",size:18}}),t("div","正在登录，请等待...")])}}),setTimeout(function(){a.$Spin.hide()},1e4),"github"==e?this.githubLogin(t):"qq"==e?this.qqLogin(t):(this.$router.push({path:"/"}),location.reload())):this.userGet()},githubLogin:function(t){this.axios({method:"post",url:"/authentication/github",params:{code:t},auth:{username:"client",password:"secret"}}).then(function(t){localStorage.setItem("currentUser_token",t.data.access_token),localStorage.setItem("currentUser_refresh_token",t.data.refresh_token),this.axios.defaults.headers.common["Authorization"]="bearer "+localStorage.getItem("currentUser_token"),this.$router.push({path:"/"}),location.reload()}.bind(this)).catch(function(t){this.$Message.error("登陆失败")}.bind(this))},qqLogin:function(t){this.axios({method:"post",url:"/authentication/qq",params:{code:t},auth:{username:"client",password:"secret"}}).then(function(t){localStorage.setItem("currentUser_token",t.data.access_token),localStorage.setItem("currentUser_refresh_token",t.data.refresh_token),this.axios.defaults.headers.common["Authorization"]="bearer "+localStorage.getItem("currentUser_token"),this.$router.push({path:"/"}),location.reload()}.bind(this)).catch(function(t){this.$Message.error("登陆失败")}.bind(this))},toMessages:function(){console.log("to messages page"),this.$router.push({path:"/page/messages"})}}}),o=n,r=(a("04ca"),a("2877")),l=Object(r["a"])(o,i,s,!1,null,null,null);l.options.__file="index.vue";e["default"]=l.exports},ea94:function(t,e,a){}}]);
//# sourceMappingURL=chunk-6c1c0ba6.5ddb8c30.js.map